{% extends "weixin/none_foot_nav_tab.html" %}
{% block css %}
<title>上传个人信息</title>
<link rel="stylesheet" href="/style/mobile/swiper3.07.min.css">
<style>
    .parent {
        padding: 0.2rem;
        background-color: #F1F1F1;
    }

    .weui-row {
        background-color: #FFFFFF;
        padding: 0.2rem;
        margin-top: 0.2rem;
        vertical-align: middle;
        text-align: center;
        height: 7rem;
    }

    .weui-col-60 {
        align-content: center;
        algin: center;
        height: 100%;
    }

    .weui-col-40 {
        margin: auto;
    }

    .weui-row img {
        width: 100%;
        height: 100%;
        padding-left: 10px;
    }

    .weui-row p {
        align-content: center;
    }

    .weui-cell {
        background-color: #FFFFFF;
        margin-top: 0.2rem;
    }

    .name {
        font-size: 14px;
        margin-top: 6px;
        line-height: 20px;
    }

    .alias {
        font-size: 14px;
        color: #f5a929;
        line-height: 20px;
        margin-top: 6px;
    }

    .goto_next {
        padding: 20px;
    }


</style>
{% endblock %}
{% block content %}
<div class="parent">
    <div class="weui-row">
        <div class="weui-col-60">
            <img src="../../style/wximg/id_card.png" id="id_card_img">
        </div>
        <div class="weui-col-40">
            <a href="javascript:;" class="weui-btn weui-btn_mini  weui-btn_plain-primary"
               id="id_card">
                选择
                <input type="file" id="id_card_file"
                       class="weui-uploader__input" accept="image/*">
            </a>
            <p class="name">
                被保人身份证<br/>
                (正面)
            </p>
            <p class="alias">
                企业用户请上传<br/>
                组织机构代码证
            </p>
        </div>
    </div>
    <div class="weui-row">
        <div class="weui-col-60">
            <img src="../../style/wximg/id_card.png">
        </div>

        <div class="weui-col-40">
            <a href="javascript:;" class="weui-btn weui-btn_mini  weui-btn_plain-primary"
               id="id_card_back">选择</a>
            <p class="name">
                被保人身份证<br/>
                (反面)
            </p>
            <p class="alias">
                企业用户请上传<br/>
                组织机构代码证
            </p>

        </div>
    </div>
    <div class="weui-row">
        <div class="weui-col-60">
            <img src="../../style/wximg/id_card.png">
        </div>

        <div class="weui-col-40">
            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_plain-primary"
               id="drive_card">选择</a>
            <p class="name">
                行驶证
            </p>
            <p class="alias">
                新车用户请上传<br/>
                购买发票
            </p>

        </div>
    </div>
    <div class="weui-row">
        <div class="weui-col-60">
            <img src="../../style/wximg/id_card.png">
        </div>

        <div class="weui-col-40">
            <a href="javascript:;" class="weui-btn weui-btn_mini weui-btn_plain-primary"
               id="drive_card_back">选择</a>
            <p class="name">
                行驶证(副本)

            </p>
            <p class="alias">
                新车用户请上传<br/>
                购买发票
            </p>


        </div>
    </div>
    <div class="weui-cell weui-cell_switch">
        <div class="weui-cell__bd">
            车主同被保险人
        </div>
        <div class="weui-cell__ft">
            <input class="weui-switch" type="checkbox" checked="checked" id="switch_owner"/>
        </div>
    </div>
    <div class="owner">
        <div class="weui-row">
            <div class="weui-col-60">
                <img src="../../style/wximg/id_card.png">
            </div>

            <div class="weui-col-40">
                <a href="javascript:;" class="weui-btn weui-btn_mini  weui-btn_plain-primary"
                   id="id_card_front_owner">选择</a>
                <p class="name">
                    车主身份证<br/>
                    (正面)
                </p>


            </div>
        </div>
        <div class="weui-row">
            <div class="weui-col-60">
                <img src="../../style/wximg/id_card.png">
            </div>

            <div class="weui-col-40">
                <a href="javascript:;" class="weui-btn weui-btn_mini  weui-btn_plain-primary"

                   id="id_card_back_owner">选择</a>
                <p class="name">
                    车主身份证<br/>
                    (反面)
                </p>


            </div>
        </div>
    </div>
    <div class="goto_next">
        <a href="javascript:;" class="weui-btn  weui-btn_primary" id="next">下一步</a>
    </div>
</div>

{% endblock %}
{% block js %}
<script>
    $(document).ready(function () {
        if ($('#switch_owner').is(':checked')) {
            $(".owner").hide();
        } else {
            $(".owner").show();
        }
    });
    $(document).on("click", "#next", function () {
        var insurance = {};
        insurance.id = 1;
        insurance.id_card_front = "http://www.baidu.com";
        window.localStorage.setItem("insurance", JSON.stringify(insurance));
        document.location.href = "/insurance_order_items"
    })
    $(document).on("click", "#switch_owner", function () {
        if ($('#switch_owner').is(':checked')) {
            $(".owner").hide();
        } else {
            $(".owner").show();
        }
    });
    $(document).on("click", "#id_card", function () {

    });
    $(document).on("click", "#id_card_back", function () {

    });

    $(document).on("click", "#drive_card", function () {
        $.actions({title: "选择图片", actions: [{text: "相机",}, {text: "相册",}]});
    });
    $(document).on("click", "#drive_card_back", function () {
        $.actions({title: "选择图片", actions: [{text: "相机",}, {text: "相册",}]});
    });

    $(document).on("click", "#id_card_front_owner", function () {
        $.actions({
            title: "选择图片", actions: [{
                text: "相机", onclick: function () {
                    galleryImg("#id_card_front_owner");
                }
            }, {
                text: "相册", onclick: function () {
                    galleryImg("#id_card_front_owner");
                }
            }]
        });
    });
    $(document).on("click", "#id_card_back_owner", function () {
        $.actions({title: "选择图片", actions: [{text: "相机",}, {text: "相册",}]});
    });


    var id_card_file = document.getElementById("id_card_file");
    if (typeof FileReader === 'undefined') {
        id_card_file.setAttribute('disabled', 'disabled');
        $.toast("抱歉，你的浏览器不支持 FileReader", "text");
    } else {
        id_card_file.addEventListener('change', readFile($("#id_card_img")), false);
    }

    function readFile(img) {
        var file = this.files[0];
        if (!/image\/\w+/.test(file.type)) {
            alert("请确保文件为图像类型");
            return false;
        }
        var reader = new FileReader();
        reader.readAsDataURL(file);

        reader.onload = function (e) {
            img.attr('src', this.result);
        }
    }
</script>
{% endblock %}