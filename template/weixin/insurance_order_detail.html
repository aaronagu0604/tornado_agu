<!--订单详情页面-->
{% extends "weixin/none_foot_nav_tab.html" %}
{% block css %}
<title>订单详情</title>
<style>
    
    hr{
        height:0.3px;border:none;border-top:1px solid #e7e7e7;
    }
    .moblie{
         display: inline-block;
     }
    .tel{
        display: inline-block;
        float: right;
    }
    .a_history{
        color: gray;
        font-size: 15px;
    }
    .weui-col-60 img {
        width:70%;
        margin-left: 1.2rem;
        height:5rem;
    }
    .weui-col-60 p {
        text-align: center;
    }
    .upload_btn{
        background-image: url("../../style/wximg/btn_photo_upload.png");
        background-size: 25px 25px;
        background-repeat: no-repeat;
        width: 25px;
        position: absolute;
        height: 25px;
        right: 20px;
        top: 1px;
    }
    .wy-insurance-img-block {
        text-align: center;
    }
    .wy-insurance-img-block img {
        height: 100px;
        width: auto;
    }
    .wy-insurance-img-block p {
        padding: 0;
        margin: 0;
        font-size: 13px;
        line-height: 17px;
    }

    .wy-insurance-img-block .display_block {
        position: relative;
        width: 100%;
    }

    .wy-insurance-img-block .display_block .btn_2 {
        width: 25px;
        position: absolute;
        height: 25px;
        right: 20px;
        top: 4px;
    }
    .wy-insurance-img-block .display_block .single_line{
        padding: 0;
        margin: 0;
        font-size: 13px;
        line-height: 25px;
    }
    p{
        color: black;
    }
    .order_remind{
        background-color: #f39b00;
        text-align: center;
        color: white;
    }
    .list-box{position:relative;}
    .address-box .weui-panel__bd{border-bottom:10px solid #f5f5f5;}
    .address-box{
        border-top:10px solid #f5f5f5;
    }
    #soon_pay{
        background-color: #FFA602;
        color: white;
    }
    .adderss_icon{
        width: 14px;
        height: 16px;
        alignment: center;
    }
    .address_detail{
        padding-left: 16px;
    }
    .detail_content{
        background-color: #f5f6f7;
        margin-top: 8px;
        padding:5px 15px 10px 15px;
    }
    .weui-flex__item{
        color: gray;
        margin: 5px;
    }
    .title{
        color: black;
        font-size: 18px;
    }
    .main_praice{
        color: #00A73B;
    }
    input{
        opacity: 0;
    }
</style>
{% endblock %}
{% block content %}
<div class="bd">
    <div class="page__bd">
        <div class="weui-cells__title">保险明细</div>
        <div class="weui-cells">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>保险明细</p>
                </div>
                <div class="weui-cell__ft">
                    <a class="a_history" href="/insurance_order_price">历史方案></a>
                </div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>人保车险</p>
                </div>
                <div class="weui-cell__ft main_praice">￥1234</div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>提交时间</p>
                </div>
                <div class="weui-cell__ft">2017-06-08</div>
            </div>
            <div class="detail_content">
                <div class="weui-flex">
                    <div class="weui-flex__item title">
                        交强险
                    </div>
                    <div class="weui-flex__item main_praice" style="text-align: right;">
                        ￥1234
                    </div>
                </div>
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        车船税
                    </div>
                    <div class="weui-flex__item" style="text-align: right;">
                        ￥1234
                    </div>
                </div>
                <div class="weui-flex">
                    <div class="weui-flex__item title">
                        商业险(主险)
                    </div>
                    <div class="weui-flex__item main_praice" style="text-align: right;">
                        ￥1234
                    </div>
                </div>
                <div class="weui-flex">
                    <div class="weui-flex__item">
                        车辆损失险
                    </div>
                    <div class="weui-flex__item" style="text-align: right;">
                        ￥1234
                    </div>
                </div>

                <div class="weui-flex">
                    <div class="weui-flex__item title">
                        商业险(附加险)
                    </div>
                    <div class="weui-flex__item main_praice" style="text-align: right;">
                        ￥1234
                    </div>
                </div>

                <div class="weui-flex">
                    <div class="weui-flex__item">
                        玻璃单独损失险
                    </div>
                    <div class="weui-flex__item" style="text-align: right;">
                        ￥1234
                    </div>
                </div>
            </div>
        </div>
        <div class="weui-cells__title">证件信息</div>
        <p class="order_remind">图片不符合要求,请重新上传</p>
        <div class="weui-flex wy-insurance-img-block">
            <div class="weui-flex__item">
                <div>
                    <img id="card_1" class="img_card own_id_card_font" src="../../style/wximg/id_card.png">
                </div>
                <div class="display_block">
                    <div>
                <p>
                    <span>身份证正面</span>
                </p>
                <p>
                    <span>(被保险人)</span>
                </p>
                        </div>
                    <a href="javascript:" class="upload_btn">
                        <input type="file" name="own_id_card_font"
                               accept="image/*">
                    </a>
                    </div>
            </div>
             <div class="weui-flex__item">
                <div>
                    <img id="card_2" class="img_card own_id_card_back" src="../../style/wximg/id_card.png">
                </div>
                <div class="display_block">
                    <div>
                        <p>
                            <span>身份证反面</span>
                        </p>
                        <p>
                            <span>(被保险人)</span>
                        </p>
                        </div>
                    <a href="javascript:" class="upload_btn">
                        <input type="file" name="own_id_card_back"
                               accept="image/*">
                    </a>
                    </div>
            </div>
        </div>
        <div class="weui-flex wy-insurance-img-block">
            <div class="weui-flex__item">
                <div>
                    <img id="card_3" class="img_card driver_card_font" src="../../style/wximg/id_card.png">
                </div>
                <div class="display_block">
                    <div>
                <p class="single_line">
                    <span>行驶证</span>
                </p>
                        </div>
                    <a href="javascript:" class="upload_btn">
                        <input type="file" name="driver_card_font"
                               accept="image/*">
                    </a>
                    </div>
            </div>
             <div class="weui-flex__item">
                <div>
                    <img id="card_4" class="img_card driver_card_back" src="../../style/wximg/id_card.png">
                </div>
                <div class="display_block">
                    <div>
                <p class="single_line">
                    <span>行驶证副本</span>
                </p>
                        </div>
                    <a href="javascript:" class="upload_btn">
                        <input type="file" name="driver_card_back"
                               accept="image/*">
                    </a>
                    </div>
            </div>
        </div>

        <div class="weui-flex wy-insurance-img-block">
            <div class="weui-flex__item">
                <div>
                    <img id="card_5" class="img_card id_card_font" src="../../style/wximg/id_card.png">
                </div>
                <div class="display_block">
                    <div>
                        <p class="single_line">
                            <span>身份证正面</span>
                        </p>
                    </div>
                    <a href="javascript:" class="upload_btn">
                        <input type="file" name="id_card_font"
                               accept="image/*">
                    </a>
                </div>
            </div>
            <div class="weui-flex__item">
                <div>
                    <img id="card_6" class="img_card id_card_back" src="../../style/wximg/id_card.png">
                </div>
                <div class="display_block">
                    <div>
                        <p class="single_line">
                            <span>身份证背面</span>
                        </p>
                    </div>
                    <a href="javascript:" class="upload_btn">
                        <input type="file" name="id_card_back"
                               accept="image/*">
                    </a>
                </div>
            </div>
        </div>

        <div class="weui-panel address-box">
            <div class="weui-panel__bd">
                <div class="weui-media-box weui-media-box_text list-box">
                    <div>
                        <img class="adderss_icon" src="../../style/wximg/img_location.png">
                        <p class="moblie">收货人:测试ios</p>
                        <p class="tel">13389202687</p>
                    </div>
                    <p class="address_detail">陕西省 西安市 新城区 测试地址</p>
                </div>
            </div>
            <div class="weui-panel__bd">
                <div class="weui-media-box weui-media-box_text list-box">
                    <a  id="soon_pay" class="weui-btn weui-btn_mini  weui-btn_default" >立即支付</a>
                    <a  href="/pay_detail" class="weui-btn weui-btn_mini  weui-btn_primary" >扫码支付</a>
                    <a href="/insurance_order_items" class="weui-btn weui-btn_mini  weui-btn_default" >重新报价</a>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock %}

{% block js %}
<script>

    $(document).ready(function () {

        $(':file').on("change", function () {
            loadingImg(this);
        });

        function loadingImg(parent) {
            var file = parent.files[0];
            $(parent).replaceWith('<input type="file" name="' + parent.name + '" accept="image/*">');
            $('input[name="' + parent.name + '"]').on("change", function () {
                loadingImg(this);
            });
            if (!/image\/\w+/.test(file.type)) {
                $.toast("请确保文件为图像类型", "text");
                return false;
            }
            var formData = new FormData();
            formData.append("file", file);
            $.ajax({
                type: "POST",
                url: "http://img.520czj.com/upload/image",
                data: formData,
                cache: false,
                contentType: false,
                processData: false,
                beforeSend: function () {
                    //页面loading, 不能再进行其他操作，适合比如提交按钮
                    $.showLoading();
                },
                success: function (data) {
                    $.hideLoading();
                    console.log(data);
                    var data = JSON.parse(data);
                    if (data.flag == 1) {
                        $("#" + parent.name).attr('src', data.data);
                        //提交上传图片
                    } else {
                        $.toast(data.msg, "text");
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $.hideLoading();
                    $.toast("上传失败，请检查网络后重试", "text");
                }

            });
        }

        $(document).on("click", "#soon_pay", function () {
            $.actions({
                title: "支付方式", actions: [{
                    text: "微信", onclick: function () {
                        galleryImg("#id_card_front_owner");
                    }
                }, {
                    text: "支付宝", onclick: function () {
                        galleryImg("#id_card_front_owner");
                    }
                }]
            });
        })

        $(document).on("click", "#code_pay", function () {
            $.actions({
                title: "扫码支付", actions: [{
                    text: "微信扫码", onclick: function () {
                        document.location.href = "/pay_detail";
                    }
                }, {
                    text: "支付宝扫码", onclick: function () {
                        document.location.href = "/pay_detail";
                    }
                }]
            });
        });
        var pb1 = $.photoBrowser({
            items: [
                $("#card_1").attr("src")
            ]
        });
        $("#card_1").click(function () {
            pb1.open();
        });
        var pb2 = $.photoBrowser({
            items: [
                $("#card_2").attr("src")
            ]
        });
        $("#card_2").click(function () {
            pb2.open();
        });
        var pb3 = $.photoBrowser({
            items: [
                $("#card_3").attr("src")
            ]
        });
        $("#card_3").click(function () {
            pb3.open();
        });
        var pb4 = $.photoBrowser({
            items: [
                $("#card_4").attr("src")
            ]
        });
        $("#card_4").click(function () {
            pb4.open();
        });
        var pb5 = $.photoBrowser({
            items: [
                $("#card_5").attr("src")
            ]
        });
        $("#card_5").click(function () {
            pb5.open();
        });
        var pb6 = $.photoBrowser({
            items: [
                $("#card_6").attr("src")
            ]
        });
        $("#card_6").click(function () {
            pb6.open();
        });

    });

</script>

{% endblock %}