<!--订单详情页面-->
{% extends "weixin/none_foot_nav_tab.html" %}
{% block css %}
<title>订单详情</title>
<style>
    
    hr{
        height:0.3px;border:none;border-top:1px solid #e7e7e7;
    }
    .moblie{
         display: inline-block;
     }
    .tel{
        display: inline-block;
        float: right;
    }
    .a_history{
        color: gray;
        font-size: 15px;
    }
    .weui-col-60 img {
        width:70%;
        margin-left: 1.2rem;
        height:5rem;
    }
    .weui-col-60 p {
        text-align: center;
    }
    .car_conten {
        margin-left: 1.5rem;
        height:2rem;
        width:100%;
    }
    .car_con {
        margin-left: 1.5rem;
        width:100%;
    }
    .car_contens {
        margin-left: 1.5rem;
        height:2rem;
        width:100%;
    }
    .car_conten img{
        position:absolute;
        width:1rem;
        height: 1rem;
        top:7.2rem;
        margin-left: 4px;
    }
    .car_contens img{
        position:absolute;
        width:1rem;
        height: 1rem;
        top:6.0rem;
        margin-left: 4px;
    }
    .row_bottom{
        margin-left: 1rem;
    }
    p{
        color: black;
    }
</style>
{% endblock %}
{% block content %}
<div class="bd">
    <div class="page__bd">
        <div class="weui-cells__title">保险明细</div>
        <div class="weui-cells">
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>保险明细</p>
                </div>
                <div class="weui-cell__ft">
                    <a class="a_history" href="/insurance_order_price">历史方案></a>
                </div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>人保车险</p>
                </div>
                <div class="weui-cell__ft">￥1234</div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>提交时间</p>
                </div>
                <div class="weui-cell__ft">2017-06-08</div>
            </div>
            <div class="weui-cell">
                <div class="weui-cell__bd">
                    <p>积分</p>
                </div>
                <div class="weui-cell__ft">303</div>
            </div>
            <div id="insrue_detail">

            </div>
        </div>
        <div class="weui-cells__title">证件图片</div>
        <div class="weui-cell">
            <div class="weui-col-60">
                <div>
                    <img class="img_card" src="../../style/wximg/id_card.png">
                </div>
                <div class="car_con">
                    <span class="p_card">身份证正面</span>
                </div>
                <div class="car_conten">
                    <span class="p_card">(被保险人)</span>
                    <img class="btn_1" src="../../style/wximg/btn_photo_upload.png">
                </div>
                
            </div>
            <div class="weui-col-60">
                <div>
                    <img class="img_card" src="../../style/wximg/id_card.png">
                </div>
                <div class="car_con">
                    <span class="p_card">身份证反面</span>
                </div>
                <div class="car_conten">
                    <span>(被保险人)</span>
                    <img src="../../style/wximg/btn_photo_upload.png">
                </div>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-col-60">
                <img class="img_card" src="../../style/wximg/id_card.png">
                <div class="car_contens">
                    <span class="p_card">行驶证</span>
                    <img class="btn_1" src="../../style/wximg/btn_photo_upload.png">
                </div>
            </div>
            <div class="weui-col-60">
                <img class="img_card" src="../../style/wximg/id_card.png">
                <div class="car_contens">
                    <span class="p_card">行驶证副本</span>
                    <img class="btn_1" src="../../style/wximg/btn_photo_upload.png">
                </div>
            </div>
        </div>
        <div class="weui-cell">
            <div class="weui-col-60">
                <img class="img_card" src="../../style/wximg/id_card.png">
                <div class="car_contens">
                    <span class="p_card">身份证正面</span>
                    <img class="btn_1" src="../../style/wximg/btn_photo_upload.png">
                </div>
            </div>
            <div class="weui-col-60">
                <img class="img_card" src="../../style/wximg/id_card.png">
                <div class="car_contens">
                    <span class="p_card">身份证背面</span>
                    <img class="btn_1" src="../../style/wximg/btn_photo_upload.png">
                </div>
            </div>
        </div>

        <a class="weui-cell" href="#">
            <div>
                <!--<img src="../../style/wximg/id_card.png">-->
                <div>
                    <p class="moblie">收货人:测试ios</p>
                    <p class="tel">13389202687</p>
                </div>
                <p>陕西省 西安市 新城区 测试地址</p>
            </div>
        </a>
    </div>
</div>
<div>

</div>

<!--<div class="weui-btn-area">-->
    <div class="row_bottom">
        <a href="" class="weui-btn weui-btn_mini  weui-btn_default" >立即支付</a>
        <a href="" class="weui-btn weui-btn_mini  weui-btn_default" >扫码支付</a>
        <a href="/insurance_order_items" class="weui-btn weui-btn_mini  weui-btn_default" >重新报价</a>
    </div>
<div >
    <div id='image-list' class="row image-list">
        <!-- <input id="upload_image" type="file" name="image" accept="image/*" /> -->
        <div class="image-item space" onclick="showActionSheet()">拍照
            <div class="image-up"></div>
        </div>
    </div>
</div>
<!--</div>-->
{% endblock %}

{% block js %}
<script>

    function showPics(url,name){
        //根据路径读取到文件
        plus.io.resolveLocalFileSystemURL(url,function(entry){
            entry.file( function(file){
                var fileReader = new plus.io.FileReader();
                fileReader.readAsDataURL(file);
                <span style="white-space:pre">   </span> ;
                fileReader.onloadend = function(e) {
                    var picUrl = e.target.result.toString();
                    var picIndex = $("#picIndex").val();
                    var nowIndex = parseInt(picIndex)+1;
                    $("#picIndex").val(nowIndex);
                    var html = '';
                    html += '<div class="image-item " id="item'+nowIndex+'">';
                    html += '<div class="image-close" onclick="delPic('+nowIndex+')">X</div>';
                    html += '<div><img src="'+picUrl+'" class="upload_img" style="width:100%;height:100%;"/></div>';
                    html += '</div>';
                    html += $("#image-list").html();
                    $("#image-list").html(html);
                    <span style="white-space:pre">   </span>}
            });
        });
    }
    //压缩图片
    function compressImage(url,filename){
        var name="_doc/upload/"+filename;
        plus.zip.compressImage({
                    src:url,//src: (String 类型 )压缩转换原始图片的路径
                    dst:name,//压缩转换目标图片的路径
                    quality:40,//quality: (Number 类型 )压缩图片的质量.取值范围为1-100
                    overwrite:true//overwrite: (Boolean 类型 )覆盖生成新文件
                },
                function(zip) {
                    //页面显示图片
                    showPics(zip.target,name);
                },function(error) {
                    plus.nativeUI.toast("压缩图片失败，请稍候再试");
                });
    }

    //调用手机摄像头并拍照
    function getImage() {
        var cmr = plus.camera.getCamera();
        cmr.captureImage(function(p) {
            plus.io.resolveLocalFileSystemURL(p, function(entry) {
                compressImage(entry.toLocalURL(),entry.name);
            }, function(e) {
                plus.nativeUI.toast("读取拍照文件错误：" + e.message);
            });
        }, function(e) {
        }, {
            filter: 'image'
        });
    }
    //从相册选择照片
    function galleryImgs() {
        plus.gallery.pick(function(e) {
            var name = e.substr(e.lastIndexOf('/') + 1);
            compressImage(e,name);
        }, function(e) {
        }, {
            filter: "image"
        });
    }

    //点击事件，弹出选择摄像头和相册的选项
    function showActionSheet() {
        var bts = [{
            title: "拍照"
        }, {
            title: "从相册选择"
        }];
        plus.nativeUI.actionSheet({
                    cancel: "取消",
                    buttons: bts
                },
                function(e) {
                    if (e.index == 1) {
                        getImage();
                    } else if (e.index == 2) {
                        galleryImgs();
                    }
                }
        );
    }
</script>

{% endblock %}